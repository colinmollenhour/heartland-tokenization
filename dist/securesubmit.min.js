!function(global,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(global.Heartland=global.Heartland||{})}(this,function(e){"use strict";var t;!function(e){(function(){function t(t){if(t||!window.parent)return this.options=e.Util.applyOptions(defaults,t),this.options=e.Util.getUrlByEnv(this.options),this.options.formId.length>0&&e.Util.addFormHandler(this.options),this.frames={},"iframe"===this.options.type&&(this.iframe_url="",this.Messages=new e.Messages(this),this.mailbox=[],this.cacheBust=1,e.Frames.configureIframe(this)),this}return t.prototype.tokenize=function(t){return t=t||{},t&&(this.options=e.Util.applyOptions(this.options,t),this.options=e.Util.getUrlByEnv(this.options)),"iframe"===this.options.type?void this.Messages.post({action:"tokenize",message:this.options.publicKey},"child"):void e.Ajax.call(this.options.type,this.options)},t.prototype.configureInternalIframe=function(t){this.Messages=new e.Messages(this),this.parent=window.parent,this.frames=this.frames||{},this.frames.parent={frame:window.parent,name:"parent",url:decodeURIComponent(document.location.hash.replace(/^#/,""))},this.loadHandler=function(t){return function(){e.DOM.resizeFrame(t)}}(this),this.receiveMessageHandlerAddedHandler=function(e){return function(){e.Messages.post({action:"receiveMessageHandlerAdded"},"parent")}}(this),e.Events.addHandler(window,"load",this.loadHandler),e.Events.addHandler(document,"receiveMessageHandlerAdded",this.receiveMessageHandlerAddedHandler),this.Messages.receive(e.Events.frameHandleWith(this),"*")},t.prototype.configureButtonFieldIframe=function(t){this.configureFieldIframe(t),e.Events.addHandler("heartland-field","click",function(e){return function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,e.Messages.post({action:"requestTokenize"},"parent")}}(this))},t.prototype.configureFieldIframe=function(t){var s=document.location.hash.replace(/^#/,""),i=s.split(":");this.Messages=new e.Messages(this),this.field=i.shift(),this.parent=window.parent,this.frames=this.frames||{},this.frames.parent={frame:window.parent,name:"parent",url:decodeURIComponent(i.join(":").replace(/^:/,""))},window.onerror=function(e){return function(t,s,i,n,r){return e.Messages.post({action:"error",data:{column:n,errorMsg:t,lineNumber:i,url:s}},"parent"),!0}}(this),this.loadHandler=function(t){return function(){e.DOM.resizeFrame(t),e.DOM.configureField(t);var s="attach"+window.name.replace("card","")+"Events";e.Card[s]&&e.Card[s]("#heartland-field")}}(this),this.receiveMessageHandlerAddedHandler=function(e){return function(){e.Messages.post({action:"receiveMessageHandlerAdded"},"parent")}}(this),e.Events.addHandler(window,"load",this.loadHandler),e.Events.addHandler(document,"receiveMessageHandlerAdded",this.receiveMessageHandlerAddedHandler),e.Frames.monitorFieldEvents(this,"heartland-field"),this.Messages.receive(e.Events.frameHandleWith(this),"*")},t.prototype.resizeIFrame=function(e,t){e&&(e.style.height=parseInt(t,10)+"px")},t.prototype.setText=function(e,t){this.Messages.post({action:"setText",id:e,text:t},"child")},t.prototype.setStyle=function(e,t){this.Messages.post({action:"setStyle",id:e,style:t},"child")},t.prototype.appendStyle=function(e,t){this.Messages.post({action:"appendStyle",id:e,style:t},"child")},t.prototype.setFocus=function(e){this.Messages.post({action:"setFocus"},e)},t.prototype.dispose=function(){this.Messages.dispose(),this.Messages=null,this.frames.cardNumber&&this.frames.cardNumber.targetNode&&this.frames.cardNumber.frame.remove(),this.frames.cardExpiration&&this.frames.cardExpiration.frame&&this.frames.cardExpiration.frame.remove(),this.frames.cardCvv&&this.frames.cardCvv.frame&&this.frames.cardCvv.frame.remove(),this.frames.child&&this.frames.child.frame&&this.frames.child.frame.remove(),this.clickHandler&&e.Events.removeHandler(this.options.buttonTarget,"click",this.clickHandler),this.loadHandler&&e.Events.removeHandler(window,"load",this.loadHandler),this.receiveMessageHandlerAddedHandler&&e.Events.removeHandler(document,"receiveMessageHandlerAdded",this.receiveMessageHandlerAddedHandler)},t})()}(t||(t={})),e.HPS=HPS,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=securesubmit.min.js.map
